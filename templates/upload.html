<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload de Arquivos</title>
    <script>
        // Função para adicionar arquivos à lista e permitir remoção
        function handleFileInput(event) {
            const fileList = document.getElementById('fileList');
            const files = event.target.files;
            
            // Limpar a lista de arquivos exibidos
            fileList.innerHTML = '';

            // Mostrar cada arquivo na lista
            Array.from(files).forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.textContent = `${file.name} `;
                
                const removeButton = document.createElement('button');
                removeButton.textContent = "Excluir";
                removeButton.onclick = () => removeFile(index);
                
                fileItem.appendChild(removeButton);
                fileList.appendChild(fileItem);
            });
        }

        // Função para remover arquivos
        function removeFile(index) {
            const fileInput = document.getElementById('file');
            const dataTransfer = new DataTransfer();

            Array.from(fileInput.files).forEach((file, i) => {
                if (i !== index) {
                    dataTransfer.items.add(file);
                }
            });

            fileInput.files = dataTransfer.files;
            handleFileInput({ target: fileInput });
        }
    </script>
</head>
<body>
    <h1>Envie seus arquivos</h1>
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <label for="document_name">Nome do Documento:</label>
        <input type="text" name="document_name" id="document_name"><br>

        <label for="document_number_start">Número inicial do documento:</label>
        <input type="number" name="document_number_start" id="document_number_start"><br>

        <label for="version_start">Versão inicial do documento:</label>
        <input type="number" name="version_start" id="version_start"><br>

        <label for="issue_date">Data de emissão (DD/MM/AAAA):</label>
        <input type="text" name="issue_date" id="issue_date"><br>

        <label for="file">Escolha seus arquivos:</label>
        <input type="file" name="file" id="file" multiple onchange="handleFileInput(event)"><br>

        <div id="fileList"></div> <!-- Lista de arquivos carregados -->

        <br><input type="submit" value="Enviar">
    </form>
</body>
</html>
